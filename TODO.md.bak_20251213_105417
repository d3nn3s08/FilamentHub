- [x] Port-Architektur finalisiert (Default 8085, ENV HOST/PORT Override).

## Debug Center Open Tasks
- Pro: MQTT Charts
- Pro: AMS Deep Inspect
- Pro: JSON Inspector polish

# Performance Lite Panel
- [x] UX verbessert: Initial-Load sofort, Loading-State, Soft-Cache (Frontend, Debug Center)
- [ ] Optional: Konfigurierbares Polling-Intervall für Performance Panel
# FilamentHub TODO

*Hinweis*: Neue Spulen-Override-Funktion (Job → Zuordnung überschreiben) eingebaut – **Testlauf erforderlich**.

## Phase 1 - Basisfunktionen
1. [x] DB Editor Tab im UI anlegen
2. [x] Backend-Endpunkt fuer schreibende SQL-Queries
3. [x] UI mit Ergebnis-/Fehleranzeige erweitern (Editor-Output, Query-Output)

## Phase 2 - Sicherheit / Admin (rot)
4. [ ] Passwortschutz fuer kritische Funktionen (DB-Editor, Migration, Backup, Admin)
5. [ ] Separater Tab mit Passwortabfrage fuer kritische Funktionen

## Phase 3 - Deployment / Migration
6. [ ] Docker/Pi-Images: alembic.ini und alembic/ ins Image aufnehmen; Schreibrechte auf data/filamenthub.db sicherstellen
7. [ ] Start-Skripte: Vor App-Start alembic upgrade head (oder init_db()) ausfuehren
8. [ ] Releases: Alembic mit ausliefern und Migrationen automatisch ausfuehren
9. [ ] Option: Bei fehlendem Alembic Start abbrechen statt warnen

## Phase 4 - CI / Tests
10. [ ] CI-Job: alembic upgrade head gegen frische DB
11. [ ] Tests im Service-Tab mit Test-DB, init_db vor pytest
12. [ ] Coverage ueber Smoke-Tests mit Test-DB

## Navigation / Design
13. [ ] Theme-Toggle finalisieren (Persistenz, OS-Mode optional, Light/Dark Assets)
14. [ ] About-Dialog im User-Menü ausliefern (Modal statt Alert)
15. [ ] User-Menü-Dropdown überall prüfen (Outside-Click, Keyboard, mobile)
16. [ ] Dashboard-KPIs/Charts in neues Layout integrieren
17. [ ] Settings-Seite: UI/Status-Feedback für API-Fehler verfeinern

## Phase 5 - Integrationen / Services
17. [ ] Test: Drucker-DB-Eintrag und Status im Debug/Status-API pruefen
18. [ ] Optionaler Auto-Connector fuer MQTT/Moonraker

## Phase 6 - Backup
15. [x] Backup-Funktion ergaenzt (DB) mit Trigger im Debug-Tab

## Phase 7 - MQTT / Debug-Center
### Low Effort
16. [ ] Topic-Liste mit Count + letzte Zeit + Klick fuer Detail
17. [ ] Feld-Kacheln (Temperaturen, Fortschritt)
18. [ ] Nachrichten-Rate (Linienplot)

### Medium
19. [ ] Diff-Viewer mit Highlight nur Veraenderungen
20. [x] JSON-Baum mit Collapse
21. [ ] Alert-Regeln (Schwellenwerte im UI)

### Fehlerbehebung / Logging
22. [x] MQTT-Logrotation auf RotatingFileHandler umstellen (Zugriffsfehler mqtt_messages.log beheben)

### High Impact
23. [ ] Aggregationspanel + Health Monitor
24. [ ] Kompakter Topic-Explorer
25. [ ] Feld-Inspector (Live-Kacheln mit Farbstatus)
26. [ ] Nachrichten-Rate Monitor (Diagramm)
27. [ ] Diff-Viewer fuer Topic-Aenderungen
28. [ ] Alert-Regeln: Schwellenwert + Popup/Sound
29. [ ] Payload-Suche + Favoriten
30. [ ] Strukturierter JSON-Baum mit Copy-Buttons
31. [ ] Export/Snapshot Button
32. [ ] Aggregationspanel: Durchschnitt/Min/Max
33. [ ] MQTT Health Panel
34. [ ] eine anzeige welches protokoll aktiv ob 5/311/usw und schaltpahr machen
35. [ ] UniversalMapper: Tests fuer single/multi AMS (parse_ams -> ams_units) ergaenzen

- [x] Alle Layout-Strings auf Encoding-Konsistenz pruefen.
- [x] Sidebar-Hygiene abgeschlossen.

- [x] Header-Cleanup abgeschlossen.

- [ ] Performance-Tab auf neues Layout migrieren
- [ ] MQTT-Viewer moderner machen und an globales Toast-/Notification-System anbinden
- [ ] AMS-Panel und Printer-Scanner in neue Struktur ueberfuehren
- [ ] WebSocket last_ping Tracking sauber implementieren
- [ ] Optional erweitern: CPU, Memory, Requests-per-Minute Abfragen
- [ ] MQTT reconnect-Status als Icon darstellen
- [ ] WebSocket last_ping sauber im Backend erfassen, um Status reachable/idle/offline zu stabilisieren
- [ ] MQTT-Details (Host/Port/Last Error) weiter ausbauen, sobald mehr Infrastruktur steht
- [ ] Optional: WS-Client-IP/Browser im Pro-Modus anzeigen
- [ ] Optional: WS-Message-Rate anzeigen
- [ ] MQTT-Live-Daten vollstaendig anbinden (nach Broker-Setup)
- [x] Performance-Panel Frontend (Lite) an neuen /api/performance/panel Vertrag anbinden (defensive Fallbacks)
- [ ] Performance-Panel Pro: History/Statistics, Sparklines und Recording-Felder nachziehen
- [ ] Performance-API Feld-Normalisierung klären (statistics vs stats, recording_start vs recording_since)
- [ ] Performance-Contract vereinheitlichen: nested vs flat (cpu.percent vs cpu_percent, ram.percent vs ram_percent, disk.percent vs disk_percent, optionale totals ram_total_mb/disk_total_gb)
- [ ] Optional: Role-based Debug Center Access (Lite/Pro)
- [ ] Optional: Pro-Hinweis/Badge im UI für eingeschränkte Tabs
- [ ] Runtime/Requests im Debug-Frontend an Middleware-Metriken anbinden (Req/min, Avg Response)
- [ ] Optional: WS-Client-Details im Pro-Modus anzeigen

