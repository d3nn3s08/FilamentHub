# Changelog

## 2025-12-02
- AMS Helper repariert (Encoding/Syntax), zeigt nun Total, Verbraucht und Rest in Metern je Slot.
- Job-Namen werden aus `subtask_name` (oder G-Code-Dateiname ohne Pfad) abgeleitet statt immer "Unnamed Job".
- Debug/DB-Editor: Nuetzliche-Links-Karte mit Standardlinks (Debug, AMS Helper, Logs, API) und Button fuer eigene Links; Debug-Link zeigt auf http://localhost:8080/debug.
- Doku: Neuer Eintrag ANLEITUNG/AMS-Live-Tracking.md; Handbuch-Inhaltsverzeichnis entsprechend verlinkt.
- AMS-Sync/Spools: Live-Update von remain_percent/weight_current aus Reports verbessert.

## 2025-11-27 (Update)
### Phase 1 – Backend/DB
- `integrations.mode` in `config.yaml` (bambu/klipper/dual/standalone); Mode-Setter-API `/api/system/mode`.
- Printer-Modell um `active` ergänzt; Alembic-Migration `4e2c1c9d8b3e_add_active_to_printer.py`.
- Spool-Update erlaubt Materialwechsel (`material_id` optional).
- System-Status liefert aktive Drucker pro Typ (`bambu_active`, `klipper_active`).

### Phase 2 – UI/Debug
- Debug-UI: Mode-Badge farblich, Mode-Dropdown + Set-Button, Anzeige aktivierter Bambu/Klipper-Drucker.
- Scanner-Tab aufgeräumt (Config-Generator entfernt, Hinweise angepasst).
- Tests-Sektion: getrennte Buttons (Smoke, DB, Alle, Coverage) mit Statusfarbe.

### Phase 3 – Tests
- Service-Routen für Tests nutzen Test-DB (`FILAMENTHUB_DB_PATH=data/test.db`), löschen sie vor dem Lauf, setzen `PYTHONPATH` und rufen `init_db()`.
- Coverage läuft gegen Smoke-Tests mit Test-DB.
- `test_db_crud.py` nutzt ENV-DB-Pfad und bricht sauber ab, wenn gelockt.

### Phase 9 – Deployment
- Dockerfile nutzt neues `entrypoint.sh`: Alembic-Migrationen vor Start, `PYTHONPATH=/app`, `FILAMENTHUB_DB_PATH=/app/data/filamenthub.db`, legt Logs/Data an.
- `entrypoint.sh` hinzugefügt (Migration + Start von `run.py`).

## 2025-11-27
- Datenbank weiterhin SQLite, Foreign-Key-Constraints aktiviert
- Material-, Spool-, Printer- und Job-Modelle mit SQLModel und Pydantic V2 erstellt und erweitert
- Alembic für spätere Migrationen eingerichtet
- API-CRUD-Endpunkte für Material und Spool implementiert und auf neue Schemas umgestellt
- FastAPI Backend mit automatischer DB-Initialisierung und Routing
- Automatisierte Smoke-Tests für Material und Spool (CRUD: create, get, list, update, delete) mit FastAPI TestClient
- Testdaten eindeutig gemacht, Duplikatfehler behoben
- Testdateien in das Verzeichnis `TEST_PY_datem` verschoben
- Alle CRUD-Tests erfolgreich durchgelaufen
- Projektstruktur nach Best Practices: app/, models/, routes/, services/, frontend/, data/, docs/
- Minimal-Dashboard als HTML-Template integriert

## 2025-11-15
- Debugcenter: Routen `/debug` und `/logs` für Fehleranalyse und Systemdiagnose
- Debug- und Log-Templates (`debug.html`, `logs.html`) integriert
- Logging-Konfiguration aus `config.yaml` und RotatingFileHandler für Logfiles
- Websocket-Streaming für Live-Logs (`/ws/logs/{module}`) implementiert
- Debug-JS und CSS für UI-Fehleranalyse und Loganzeige
- CONTRIBUTING.md und CODE_OF_CONDUCT.md ergänzt
- Roadmap und Features in README.md dokumentiert
- MIT-Lizenz hinzugefügt
